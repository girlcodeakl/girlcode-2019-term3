<!DOCTYPE html>
<html>
  <head>

    
    <meta charset='utf-8'>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="/timeago.min.js"></script>
    <title>Message Feed</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <a class="link link1" href="#">Get a Dark Fortune</a>
    <a class="link link2" href="#">Get a Gentle Fortune</a>
    <a class="link link3" href="#">Get a Too Good To Be True Fortune</a>
    <a class="link link4" href="#">Get a Pragmatic Fortune</a>

      <div class="topnav">
          <a class="active" href="/feed.html">Feed</a>
          <a href="/post.html">Message</a>
          <a href="/">Home</a>
        </div>

        
    <h1 class="title">Message Feed</h1>
    <div class="message-list">
    </div>


    <script>
//Hello! This is the start of the JavaScript.

function displayMessage(post) {

  let postHTML = 
  '<div class="post">'

+ '<div class="message">' + post.message + '<img src="'+post.image+'"> </div>'
  + '<div class="time">' + timeago.format(post.time) + '</div>'


  + '</div>';

  let messageList = document.querySelector(".message-list");
  messageList.innerHTML = postHTML;
}

function createFeed(posts) {
  posts.forEach(displayMessage);
}

getFortune1()

function getFortune1() {
fetch("/random/dark") 
  .then(response => response.json())
  .then(displayMessage)
}


let link1 = document.querySelector(".link1");
link1.addEventListener("click", getFortune1);

function getFortune2() {
fetch("/random/gentle") 
  .then(response => response.json())
  .then(displayMessage)
}


let link2 = document.querySelector(".link2");
link2.addEventListener("click", getFortune2);

function getFortune3() {
fetch("/random/too good to be true") 
  .then(response => response.json())
  .then(displayMessage)
}


let link3 = document.querySelector(".link3");
link3.addEventListener("click", getFortune3);

function getFortune4() {
fetch("/random/pragmatic") 
  .then(response => response.json())
  .then(displayMessage)
}


let link4 = document.querySelector(".link4");
link4.addEventListener("click", getFortune4);

//This is the end of the JavaScript.
    </script>
  </body>
</html>